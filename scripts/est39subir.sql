create database secundaria;
use secundaria;

create table periodo(
    idp varchar(10) CHARACTER SET utf8 COLLATE utf8_spanish_ci not null,
    descper varchar(100) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    predet tinyint,
    primary key(idp)
)ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
insert into periodo (idp, descper, predet) values 
('2017', 'AGOSTO 2017 - JULIO 2018',0),
('2018', 'AGOSTO 2018 - JULIO 2019',0),
('2019', 'AGOSTO 2019 - JULIO 2020',0),
('2020', 'AGOSTO 2020 - JULIO 2021',1);


create table control(
    idc int not null primary key,
    descc varchar(50) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    val int
)ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
insert control (idc, descc, val) values
(1,'Contador de numeros de control',0),
(2,'Contador de numeros de horario',0),
(3,'Matutino Control de trimestres',0),
(4,'Vespertino Control de trimestres',0);

create table trimestre(
    trim int not null primary key,
    dest varchar(50) CHARACTER SET utf8 COLLATE utf8_spanish_ci
)ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
insert trimestre values 
(1,'1er Trimestre'),
(2,'2o Trimestre'),
(3,'3er Trimestre'),
(4,'Abierto'),
(5,'Cerrado');

create table taller(
    idt varchar(10) CHARACTER SET utf8 COLLATE utf8_spanish_ci not null,
    nomt varchar(100) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    primary key(idt)
)ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
insert into taller (idt,nomt) values
('T307','CONTABILIDAD'),
('T310','DIBUJO INDUSTRIAL'),
('T315','ELECTRICIDAD'),
('T319','INDUSTRIA DEL VESTIDO'),
('T325','COMPUTACION'),
('T327','SECRETARIADO');

create table rol(
 idr int not null primary key,
 tipo varchar(100) CHARACTER SET utf8 COLLATE utf8_spanish_ci
)ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
insert into rol (idr, tipo) values 
(1,'Administrador'),
(2,'Académico'),
(3,'Docente'),
(4,'Prefecto');


create table personal (
    rfcp varchar(13) CHARACTER SET utf8 COLLATE utf8_spanish_ci not null,
    nomp varchar(50) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    turno varchar(1) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    passp varchar(40) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    primary key(rfcp)
)ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
insert into personal (rfcp, nomp,  turno, passp) values 
('VIJV','VICENTE JIMENEZ VICTOR IVAN','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P001','JORGE LUIS OCAMPO','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P002','ESLY ORDOÑEZ NAVARRO','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P003','XIMENA  CARRILLO PEÑA','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P004','MARIA DEL ROCIO  REYES ','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P005','ALLYSON AGUILAR GONZÁLEZ','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P006','CLARET GUADALUPE MONTES','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P007','MARIA DE LA LUZ HERNANDEZ','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P008','OLDAIR OSCAR SOSA','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P009','SILVIA HERNANDEZ CALLEJA','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P010','MA. DEL ROSARIO ARELLANES','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P011','BLANCA ROSARIO FLORES','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P012','JOSELINE DAYANA PLATA','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P014','GLADYS ROSA HERNANDEZ','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P015','MARIA ISABEL RODRIGUEZ SION','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P016','SILVIA MARTINEZ VENTURA','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P017','ANGEL GASCA BORJA','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P018','HORTENSIA BERMUDEZ JACINTO','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P019','MARIA DE LOS ANGELES ','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P020','ANDREA ROSAS','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P021','DIANA IVETTE ROBOLLEDO','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P022','GUADALUPE DONAJI PEREZ','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P023','MAYRA DANNAE BAÑUELOS','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P024','LILIA GARCIA MENDEZ','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P025','JAVIER EDUARDO NAVARRETE','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P026','VICTOR EMILIO DOMINGUEZ','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P027','LESLY RAMOS TRUJILLO','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P028','JESUS DAVID LOPEZ','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P029','ALEJANDRA  REYES PLATA','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P030','GRISSELLE ESCOBAR DUBON','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P031','OMAR BAHENA MENDOZA','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P032','GUSTAVO REYES  GONZALEZ','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220'),
('P033','OSCAR IVAN SANCHEZ MEJIA','V','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220');

create table permisos(
    rfcp varchar(13) CHARACTER SET utf8 COLLATE utf8_spanish_ci not null,
    idr int not null,
    status tinyint,
    primary key(rfcp, idr),
    FOREIGN KEY(rfcp) REFERENCES personal(rfcp) on update cascade on delete cascade,
    FOREIGN KEY(idr) REFERENCES rol(idr) on update cascade on delete cascade
)ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT into permisos (rfcp, idr, status) values 
('VIJV',1,1),
('P001',3,1),
('P002',3,1),
('P003',3,1),
('P004',3,1),
('P005',3,1),
('P006',3,1),
('P007',3,1),
('P008',3,1),
('P009',3,1),
('P010',3,1),
('P011',3,1),
('P012',3,1),
('P014',3,1),
('P015',3,1),
('P016',3,1),
('P017',3,1),
('P018',3,1),
('P019',3,1),
('P020',3,1),
('P021',3,1),
('P022',3,1),
('P023',3,1),
('P024',3,1),
('P025',3,1),
('P026',3,1),
('P027',3,1),
('P028',3,1),
('P029',3,1),
('P030',3,1),
('P031',3,1),
('P032',3,1),
('P033',3,1);


create table materia(
    idmat varchar(10) CHARACTER SET utf8 COLLATE utf8_spanish_ci not null,
    nommat varchar(50) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    grado int,
    status tinyint,
    primary key (idmat)
)ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
insert into materia (idmat, nommat, grado, status) values
('M0001','ESPAÑOL',1,1),
('M0002','INGLES',1,1),
('M0003','MATEMATICAS',1,1),
('M0004','BIOLOGIA',1,1),
('M0005','GEOGRAFIA',1,1),
('M0006','FCYE.',1,1),

('M0007','HISTORIA',1,1),
('M0008','EDUC. FISICA',1,1),
('M0009','ARTES',1,1),
('M0010','EDUCACION SOCIOEMOCIONAL',1,1),
('M0011','VIDA SALUDABLE',1,1),
('M0012','ESPAÑOL',2,1),
('M0013','INGLES',2,1),
('M0014','MATEMATICAS',2,1),
('M0015','FISICA',2,1),
('M0016','HISTORIA',2,1),
('M0017','FCYE',2,1),

('M0018','EDUC. FISICA',2,1),
('M0019','ARTES',2,1),
('M0020','EDUCACION SOCIOEMOCIONAL',2,1),
('M0021','VIDA SALUDABLE',2,1),
('M0022','ESPAÑOL',3,1),
('M0023','INGLES',3,1),
('M0024','MATEMATICAS',3,1),
('M0025','QUIMICA',3,1),
('M0026','HISTORIA',3,1),
('M0027','FCYE',3,1),

('M0028','EDUC. FISICA',3,1),
('M0029','ARTES',3,1),
('M0030','EDUCACION SOCIOEMOCIONAL',3,1),
('M0031','VIDA SALUDABLE',3,1);



CREATE TABLE alumno ( 
    matricula varchar(9) CHARACTER SET utf8 COLLATE utf8_spanish_ci not null,
    nom varchar(40) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    app varchar(20) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    apm varchar(20) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    sexo varchar(2) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    curp varchar(25) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    fecnac date default NULL,
    calle varchar(50) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    colonia varchar(50) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    ciudad varchar(50) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    cp varchar(5) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    telal varchar(15) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    email varchar(50) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    
    idt varchar(10) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    passal varchar(40) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    grado int(11) default NULL,
    nomtut varchar(50) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    dirtut varchar(60) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    teltut varchar(15) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    fecalta date default NULL,
    status int(11) default NULL,
    turno varchar(1) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    PRIMARY KEY (matricula),
    KEY matricula (matricula),
    KEY idt (idt),
    FOREIGN KEY (idt) REFERENCES taller (idt) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

insert into alumno (matricula, nom, app, apm, sexo, curp, grado, idt, passal, status, turno) VALUES
('3863548','JOEL ENRIQUE','ANGEL','MONARES','M','AEMJ061120HMCNNLA2',1,'T307','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('1186304','JOSE ANTONIO','ANGUIANO','GONZALEZ','M','AUGA060523HDFNNNA4',1,'T307','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('3858518','AXEL TADEO PARIS','AVALOS','HERRERA','M','AAHA061230HMCVRXA0',1,'T307','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('1762748','JOSMAR MIGUEL','BARRAGAN','BAEZ','M','BABJ060406HMCRZSA2',2,'T307','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('3955119','CESAR EFREN','BECERRIL','JIMENEZ','M','BEJC060605HMCCMSA4',2,'T307','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('1336843','ANGEL EDUARDO','BRUCE','RODRIGUEZ','M','BURA060114HDFRDNA4',2,'T307','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('159017','CARLOS DE JESUS','CAMACHO','RESENDIZ','M','CARC050321HMCMSRA7',3,'T307','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('1341195','DIANA PAOLA','CANO','GARCIA','F','CAGD060530MDFNRNA7',3,'T307','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('1338882','LENA VALENTINA','CASTRO','DE JESUS','F','CAJL060320MDFSSNA7',3,'T307','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('2922547','GERARDO','DE LA ROSA','HERNANDEZ','M','ROHG051121HNESRRA0',1,'T310','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('1324992','ANGEL EDUARDO','DURAN','HERNANDEZ','M','DUHA060225HDFRRNA4',1,'T310','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('3902336','EFRAIN','ESPAÑA','ZAVALA','M','EAZE061203HTLSVFA3',1,'T310','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('3906727','FERNANDO','FLORES','CLIMACO','M','FOCF060928HMCLLRA4',2,'T310','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('3903866','NATALY CITLALY','FLORES','DE PAZ','F','FOPN050420MMCLZTA4',2,'T310','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('1330367','ARTURO RUBEN','GALAN','FLORES','M','GAFA060614HMCLLRA7',2,'T310','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('1763503','CARLOS BARUCH','GARCIA','ORTEGA','M','GAOC060622HMCRRRA2',3,'T310','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('3857390','JUAN CARLOS','GONZALEZ','RUIZ','M','GORJ061116HDFNZNA4',3,'T310','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('1762933','LUZ BELEN','GONZALEZ','VELAZQUEZ','F','GOVL061204MDFNLZA8',3,'T310','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('3928628','IAN YAEL','HERNANDEZ','ARIAS','M','HEAI060927HMCRRNA3',3,'T310','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('1762757','BRAULIO','HERNANDEZ','SEBASTIAN','M','HESB061019HDFRBRA1',1,'T315','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('34684','ESTHER','LUCAS','LOPEZ','F','LULE050517MOCCPSA2',1,'T315','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('1186314','MEILY MICHELLE','LUNA','RODRIGUEZ','F','LURM060209MDFNDLA9',1,'T315','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('3323585','ALONDRA MICHELL','MARTINEZ','HERMENEGILDO','F','MAHA060731MDFRRLA6',2,'T315','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('2967851','PERLA ESMERALDA','MONDRAGON','JARDINEZ','F','MOJP060628MDFNRRA1',2,'T315','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('3903332','AMAIRANI','MORENO','FELIX','F','MOFA060813MMCRLMA4',2,'T315','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('1203479','MARIA FERNANDA','OLEA','CASTANEYRA','F','OECF061205MOCLSRA0',3,'T315','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('3861850','ANGEL GABRIEL','ORTIZ','LEMUS','M','OILA060710HMCRMNA4',3,'T315','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('3955830','JORGE ALFREDO','PALACIOS','MARCIAL','M','PAMJ060601HPLLRRA7',3,'T315','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('3902235','TANIA LISSETTE','PELAEZ','HEREDIA','F','PEHT060515MMCLRNA6',1,'T315','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('3905916','ANTHONY JOSEP','PEREZ','HERNANDEZ','M','PEHA060314HMCRRNA2',2,'T315','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('3163641','LESLI JANETE','RAMOS','ANDRADE','F','RAAL060201MDFMNSA6',3,'T315','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('3901367','KEYLANI PAMELA','RODRIGUEZ','AGUILAR','F','ROAK060629MDFDGYA5',1,'T315','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('1337080','DILAN ALEXIS','ROMERO','MENDEZ','M','ROMD060118HMCMNLA6',1,'T310','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('3859392','MITZY MARIANA','ROQUE','GARCIA','F','ROGM060526MDFQRTA4',2,'T310','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('1950846','NICOLE LIVIER','RUIZ','TOBON','F','RUTN061119MDFZBCA5',3,'T310','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('1186201','DIANA LAURA','VALENCIA','AGUILAR','F','VAAD061110MDFLGNA3',1,'T307','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('3952276','PAOLA MARLEN','YAÑEZ','ROJAS','F','YARP060110MMCXJLA2',2,'T307','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('1757491','GENESIS NATALIA','ZAMBRANO','PEREZ','F','ZAPG060424MDFMRNA0',3,'T307','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V'),
('1186328','GABRIEL SEBASTIAN','ZAVALA','MATA','M','ZAMG061012HMCVTBA7',1,'T307','7110EDA4D09E062AA5E4A390B0A572AC0D2C0220',1,'V');

-- creacion de horario --


CREATE TABLE grupo (
idg int, 
grupo varchar(3) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
grado int,
PRIMARY KEY (idg)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
insert grupo values
(1,'1A',1),
(2,'1B',1),
(3,'1C',1),
(4,'1D',1),
(5,'1E',1),
(6,'1F',1),
(7,'1G',1),
(8,'1H',1),
(9,'1I',1),
(10,'1J',1),
(11,'1K',1),
(18,'2A',2),
(19,'2B',2),
(20,'2C',2),
(21,'2D',2),
(22,'2E',2),
(23,'2F',2),
(24,'2G',2),
(25,'2H',2),
(35,'3A',3),
(36,'3B',3),
(37,'3C',3),
(38,'3D',3),
(39,'3E',3),
(40,'3F',3),
(41,'3G',3),
(42,'3H',3),
(43,'3I',3),
(44,'3J',3),
(45,'3K',3),
(46,'3L',3),
(47,'3M',3),
(48,'3N',3),
(49,'3O',3),
(50,'3P',3),
(51,'3Q',3);


CREATE TABLE semana (
idia int(11) NOT NULL,
dia varchar(10) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
PRIMARY KEY (idia)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
INSERT INTO semana (idia, dia) VALUES
(1, 'LUNES'),
(2, 'MARTES'),
(3, 'MIERCOLES'),
(4, 'JUEVES'),
(5, 'VIERNES'),
(6, 'SABADO'),
(7, 'DOMINGO');

CREATE TABLE reloj (
idr int(11) NOT NULL,
hora varchar(15) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
PRIMARY KEY (idr)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
INSERT INTO reloj (idr, hora) VALUES
(1,'14:00-14:50'),
(2,'14:50-15:40'),
(3,'15:40-16:30'),
(4,'16:30-17:20'),
(5,'17:40-18-30'),
(6,'18:30-19:20'),
(7,'19:20-20:10'),
(8,'20:10-21:00');



CREATE TABLE horario (
idh int NOT NULL,
idmat varchar(10) CHARACTER SET utf8 COLLATE utf8_spanish_ci not null,
rfcp varchar(13) CHARACTER SET utf8 COLLATE utf8_spanish_ci not null,
idg int not null,
idp varchar(10) CHARACTER SET utf8 COLLATE utf8_spanish_ci not null,
turno varchar(1) CHARACTER SET utf8 COLLATE utf8_spanish_ci not null,
PRIMARY KEY (idh),
FOREIGN KEY (rfcp) REFERENCES personal (rfcp) ON UPDATE CASCADE ON DELETE CASCADE,
FOREIGN KEY (idmat) REFERENCES materia (idmat) ON UPDATE CASCADE ON DELETE CASCADE,
FOREIGN KEY (idg) REFERENCES grupo (idg) ON UPDATE CASCADE ON DELETE CASCADE,
FOREIGN KEY (idp) REFERENCES periodo (idp) ON UPDATE CASCADE ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

insert into horario (idh, idmat, rfcp, idg, idp, turno) values
(1,'M0001','P001',1,'2020','V'),
(2,'M0002','P002',1,'2020','V'),
(3,'M0003','P003',1,'2020','V'),
(4,'M0004','P004',1,'2020','V'),
(5,'M0005','P005',1,'2020','V'),
(6,'M0006','P006',1,'2020','V'),

(7,'M0007','P007',1,'2020','V'),
(8,'M0008','P008',1,'2020','V'),
(9,'M0009','P009',1,'2020','V'),
(10,'M0010','P007',1,'2020','V'),
(11,'M0011','P010',1,'2020','V'),

(12,'M0001','P011',2,'2020','V'),
(13,'M0002','P012',2,'2020','V'),
(14,'M0003','P014',2,'2020','V'),
(15,'M0004','P004',2,'2020','V'),
(16,'M0005','P005',2,'2020','V'),
(17,'M0006','P015',2,'2020','V'),

(18,'M0007','P016',2,'2020','V'),
(19,'M0008','P008',2,'2020','V'),
(20,'M0009','P009',2,'2020','V'),
(21,'M0010','P017',2,'2020','V'),
(22,'M0011','P018',2,'2020','V'),

(23,'M0001','P011',3,'2020','V'),
(24,'M0002','P002',3,'2020','V'),
(25,'M0003','P014',3,'2020','V'),
(26,'M0004','P019',3,'2020','V'),
(27,'M0005','P005',3,'2020','V'),
(28,'M0006','P006',3,'2020','V'),

(29,'M0007','P016',3,'2020','V'),
(30,'M0008','P008',3,'2020','V'),
(31,'M0009','P009',3,'2020','V'),
(32,'M0010','P010',3,'2020','V'),
(33,'M0011','P010',3,'2020','V'),

(34,'M0001','P011',4,'2020','V'),
(35,'M0002','P002',4,'2020','V'),
(36,'M0003','P013',4,'2020','V'),
(37,'M0004','P019',4,'2020','V'),
(38,'M0005','P005',4,'2020','V'),
(39,'M0006','P020',4,'2020','V'),

(40,'M0007','P016',4,'2020','V'),
(41,'M0008','P008',4,'2020','V'),
(42,'M0009','P021',4,'2020','V'),
(43,'M0010','P017',4,'2020','V'),
(44,'M0011','P010',4,'2020','V'),

(45,'M0001','P001',5,'2020','V'),
(46,'M0002','P012',5,'2020','V'),
(47,'M0003','P014',5,'2020','V'),
(48,'M0004','P004',5,'2020','V'),
(49,'M0005','P005',5,'2020','V'),
(50,'M0006','P015',5,'2020','V'),

(51,'M0007','P016',5,'2020','V'),
(52,'M0008','P008',5,'2020','V'),
(53,'M0009','P021',5,'2020','V'),
(54,'M0010','P004',5,'2020','V'),
(55,'M0011','P022',5,'2020','V'),

(56,'M0001','P023',6,'2020','V'),
(57,'M0002','P018',6,'2020','V'),
(58,'M0003','P013',6,'2020','V'),
(59,'M0004','P004',6,'2020','V'),
(60,'M0005','P005',6,'2020','V'),
(61,'M0006','P010',6,'2020','V'),

(62,'M0007','P024',6,'2020','V'),
(63,'M0008','P008',6,'2020','V'),
(64,'M0009','P021',6,'2020','V'),
(65,'M0010','P010',6,'2020','V'),
(66,'M0011','P015',6,'2020','V'),

(67,'M0012','P001',18,'2020','V'),
(68,'M0013','P002',18,'2020','V'),
(69,'M0014','P025',18,'2020','V'),
(70,'M0015','P004',18,'2020','V'),
(71,'M0016','P026',18,'2020','V'),
(72,'M0017','P006',18,'2020','V'),

(73,'M0018','P008',18,'2020','V'),
(74,'M0019','P009',18,'2020','V'),
(75,'M0020','P009',18,'2020','V'),
(76,'M0021','P019',18,'2020','V'),

(77,'M0012','P001',19,'2020','V'),
(78,'M0013','P012',19,'2020','V'),
(79,'M0014','P025',19,'2020','V'),
(80,'M0015','P027',19,'2020','V'),
(81,'M0016','P026',19,'2020','V'),
(82,'M0017','P006',19,'2020','V'),

(83,'M0018','P008',19,'2020','V'),
(84,'M0019','P009',19,'2020','V'),
(85,'M0020','P009',19,'2020','V'),
(86,'M0021','P028',19,'2020','V'),

(87,'M0012','P028',20,'2020','V'),
(88,'M0013','P002',20,'2020','V'),
(89,'M0014','P029',20,'2020','V'),
(90,'M0015','P019',20,'2020','V'),
(91,'M0016','P016',20,'2020','V'),
(92,'M0017','P006',20,'2020','V'),

(93,'M0018','P008',20,'2020','V'),
(94,'M0019','P009',20,'2020','V'),
(95,'M0020','P028',20,'2020','V'),
(96,'M0021','P010',20,'2020','V'),

(97,'M0012','P023',21,'2020','V'),
(98,'M0013','P012',21,'2020','V'),
(99,'M0014','P029',21,'2020','V'),
(100,'M0015','P027',21,'2020','V'),
(101,'M0016','P020',21,'2020','V'),
(102,'M0017','P006',21,'2020','V'),

(103,'M0018','P017',21,'2020','V'),
(104,'M0019','P021',21,'2020','V'),
(105,'M0020','P029',21,'2020','V'),
(106,'M0021','P030',21,'2020','V'),

(107,'M0012','P028',22,'2020','V'),
(108,'M0013','P002',22,'2020','V'),
(109,'M0014','P029',22,'2020','V'),
(110,'M0015','P027',22,'2020','V'),
(111,'M0016','P020',22,'2020','V'),
(112,'M0017','P006',22,'2020','V'),

(113,'M0018','P017',22,'2020','V'),
(114,'M0019','P021',22,'2020','V'),
(115,'M0020','P029',22,'2020','V'),
(116,'M0021','P010',22,'2020','V'),

(117,'M0012','P028',23,'2020','V'),
(118,'M0013','P012',23,'2020','V'),
(119,'M0014','P013',23,'2020','V'),
(120,'M0015','P027',23,'2020','V'),
(121,'M0016','P020',23,'2020','V'),
(122,'M0017','P010',23,'2020','V'),

(123,'M0018','P017',23,'2020','V'),
(124,'M0019','P021',23,'2020','V'),
(125,'M0020','P020',23,'2020','V'),
(126,'M0021','P015',23,'2020','V'),

(127,'M0022','P023',35,'2020','V'),
(128,'M0023','P002',35,'2020','V'),
(129,'M0024','P014',35,'2020','V'),
(130,'M0025','P031',35,'2020','V'),
(131,'M0026','P007',35,'2020','V'),
(132,'M0027','P015',35,'2020','V'),

(133,'M0028','P017',35,'2020','V'),
(134,'M0029','P009',35,'2020','V'),
(135,'M0030','P002',35,'2020','V'),
(136,'M0031','P015',35,'2020','V'),

(137,'M0022','P001',36,'2020','V'),
(138,'M0023','P002',36,'2020','V'),
(139,'M0024','P013',36,'2020','V'),
(140,'M0025','P031',36,'2020','V'),
(141,'M0026','P007',36,'2020','V'),
(142,'M0027','P006',36,'2020','V'),

(143,'M0028','P017',36,'2020','V'),
(144,'M0029','P009',36,'2020','V'),
(145,'M0030','P032',36,'2020','V'),
(146,'M0031','P010',36,'2020','V'),

(147,'M0022','P001',37,'2020','V'),
(148,'M0023','P012',37,'2020','V'),
(149,'M0024','P033',37,'2020','V'),
(150,'M0025','P031',37,'2020','V'),
(151,'M0026','P007',37,'2020','V'),
(152,'M0027','P006',37,'2020','V'),

(153,'M0028','P017',37,'2020','V'),
(154,'M0029','P021',37,'2020','V'),
(155,'M0030','P006',37,'2020','V'),
(156,'M0031','P006',37,'2020','V'),

(157,'M0022','P001',38,'2020','V'),
(158,'M0023','P012',38,'2020','V'),
(159,'M0024','P033',38,'2020','V'),
(160,'M0025','P031',38,'2020','V'),
(161,'M0026','P007',38,'2020','V'),
(162,'M0027','P015',38,'2020','V'),

(163,'M0028','P017',38,'2020','V'),
(164,'M0029','P021',38,'2020','V'),
(165,'M0030','P017',38,'2020','V'),
(166,'M0031','P015',38,'2020','V'),

(167,'M0022','P023',39,'2020','V'),
(168,'M0023','P012',39,'2020','V'),
(169,'M0024','P033',39,'2020','V'),
(170,'M0025','P004',39,'2020','V'),
(171,'M0026','P016',39,'2020','V'),
(172,'M0027','P006',39,'2020','V'),

(173,'M0028','P017',39,'2020','V'),
(174,'M0029','P009',39,'2020','V'),
(175,'M0030','P023',39,'2020','V'),
(176,'M0031','P006',39,'2020','V'),

(177,'M0022','P001',40,'2020','V'),
(178,'M0023','P012',40,'2020','V'),
(179,'M0024','P033',40,'2020','V'),
(180,'M0025','P031',40,'2020','V'),
(181,'M0026','P016',40,'2020','V'),
(182,'M0027','P006',40,'2020','V'),

(183,'M0028','P017',40,'2020','V'),
(184,'M0029','P009',40,'2020','V'),
(185,'M0030','P017',40,'2020','V'),
(186,'M0031','P006',40,'2020','V');



CREATE TABLE imparte (
idh int(11) NOT NULL,
idia int(11) NOT NULL,
idr int(11) NOT NULL,
PRIMARY KEY (idh,idia,idr),
FOREIGN KEY (idh) REFERENCES horario (idh) ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY (idia) REFERENCES semana (idia) ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY (idr) REFERENCES reloj (idr) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;




CREATE TABLE cursa (
    idh int(11) NOT NULL,
    matricula varchar(9) CHARACTER SET utf8 COLLATE utf8_spanish_ci not null,
    tr1 int,
    ftr1 date,
    asigna1 varchar(10) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    tr2 int,
    ftr2 date,
    asigna2 varchar(10) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    tr3 int,
    ftr3 date,
    asigna3 varchar(10) CHARACTER SET utf8 COLLATE utf8_spanish_ci,
    deser int(11) default NULL,
    prom float default NULL,
    PRIMARY KEY (idh,matricula),
    KEY idh (idh,matricula),
    FOREIGN KEY (idh) REFERENCES horario (idh) ON UPDATE CASCADE,
    FOREIGN KEY (asigna1) REFERENCES personal (rfcp) ON UPDATE CASCADE,
    FOREIGN KEY (asigna2) REFERENCES personal (rfcp) ON UPDATE CASCADE,
    FOREIGN KEY (asigna3) REFERENCES personal (rfcp) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

insert into cursa (idh, matricula) values 
(1,'3863548'),
(1,'1186304'),
(1,'3858518'),
(1,'1762748'),
(1,'3955119'),
(2,'3863548'),
(2,'1186304'),
(2,'3858518'),
(2,'1762748'),
(2,'3955119'),
(3,'3863548'),
(3,'1186304'),
(3,'3858518'),
(3,'1762748'),
(3,'3955119'),
(4,'3863548'),
(4,'1186304'),
(4,'3858518'),
(4,'1762748'),
(4,'3955119'),
(5,'3863548'),
(5,'1186304'),
(5,'3858518'),
(5,'1762748'),
(5,'3955119'),
(6,'1336843'),
(6,'159017'),
(6,'1341195'),
(6,'1338882'),
(7,'1336843'),
(7,'159017'),
(7,'1341195'),
(7,'1338882'),
(8,'1336843'),
(8,'159017'),
(8,'1341195'),
(8,'1338882'),
(9,'2922547'),
(9,'1324992'),
(9,'3902336'),
(9,'3906727'),
(11,'2922547'),
(11,'1324992'),
(11,'3902336'),
(11,'3906727'),
(12,'2922547'),
(12,'1324992'),
(12,'3902336'),
(12,'3906727');